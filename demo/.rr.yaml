version: '3'

rpc:
  listen: tcp://127.0.0.1:6001

server:
  command: "php worker.php"
  relay: pipes

http:
  address: "0.0.0.0:8080"

jobs:
  consume: [ "demo-queue" ]
  pool:
    num_workers: 2
    supervisor:
      max_worker_memory: 100
  pipelines:
    demo-queue:
      driver: memory
      config:
        priority: 10